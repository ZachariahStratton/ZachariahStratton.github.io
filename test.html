<html>
        <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <script src="jquery-2.1.4.js"></script>
        <link rel="stylesheet" type="text/css" href="styles.css">
        </head>
        <body>
		
        <div id="navbar"><span>3D Sock Design Viewer v1.001</span></div>
        <script src="./three.min.js"></script>
        <script src="./OBJLoader.js"></script>
        <script src="./MTLLoader.js"></script>
		
		<!-- Source: https://jsfiddle.net/f2Lommf5/4991/ -->
		<script type='text/javascript'>
		let camera, scene, renderer, mesh;

		init();
		animate();
			
		function init() {
		
			//Upload texture button
			var inputFileToLoad = document.createElement("input");
			inputFileToLoad.type = "file";
			inputFileToLoad.id = "inputFileToLoad";
			document.body.appendChild(inputFileToLoad);

			var buttonLoadFile = document.createElement("button");
			buttonLoadFile.onclick = applyTexture;
			buttonLoadFile.textContent = "Apply Texture";
			document.body.appendChild(buttonLoadFile);

			//create scene for 3D model
		    camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 10);
		    camera.position.z = 1;
		    scene = new THREE.Scene();
			
			//Load default textures
			var tLoader = new THREE.TextureLoader();
			var texture1 = tLoader.load('img.jpg');
			
			//create basic block and add texture1 (img.jpg) to it
		    const geometry = new THREE.BoxBufferGeometry(0.4, 0.4, 0.4);
			const material = new THREE.MeshBasicMaterial({
				map: texture1
			});

		    mesh = new THREE.Mesh(geometry, material);
		    scene.add(mesh);
			
			//Create 3D model from obj file

			// load a resource
			/*
			var mtlLoader = new THREE.MTLLoader();
			mtlLoader.load("block.mtl", function(materials){
				
				materials.preload();
				var objLoader = new THREE.OBJLoader();
				objLoader.setMaterials(materials);
				
				objLoader.load("block.obj", function(mesh){
				
					mesh.traverse(function(node){
						if( node instanceof THREE.Mesh ){
							node.castShadow = true;
							node.receiveShadow = true;
						}
					});
				
					scene.add(mesh);
					mesh.position.set(-5, 0, 4);
					mesh.rotation.y = -Math.PI/4;
				});
				
			});
			*/
			
			
		    renderer = new THREE.WebGLRenderer({
			  antialias: true
		    });
		    renderer.setPixelRatio(window.devicePixelRatio);
		    renderer.setSize(window.innerWidth, window.innerHeight);
		    document.body.appendChild(renderer.domElement);
			
			function applyTexture()
			{
				var filesSelected = document.getElementById("inputFileToLoad").files;
				if (filesSelected.length > 0)
				{
					var fileToLoad = filesSelected[0];

					if (fileToLoad.type.match("image.*"))
					{
						var fileReader = new FileReader();
						fileReader.onload = function(fileLoadedEvent) 
						{
							const loader2 = new THREE.TextureLoader();
							newTexture = loader2.load(fileLoadedEvent.target.result);
							material.map = newTexture;
						};
						fileReader.readAsDataURL(fileToLoad);
					}
				}
			}
		}

		function animate() {

		  requestAnimationFrame(animate);

		  mesh.rotation.x += 0.01;
		  mesh.rotation.y += 0.02;

		  renderer.render(scene, camera);

		}
		
		//main();
		</script>
		
        </body>
</html>